---

---

<div class="w-full overflow-x-auto">
  <table class="w-full text-left rounded" cellspacing="0">
    <thead>
      <tr>
        <Fragment set:html={"{% for header in headers %}"} />
        <th
          scope="col"
          class="h-12 px-6 text-sm font-medium border-secondary-300"
        >
          <Fragment set:html={"{{ header.label }}"} />
        </th>
        <Fragment set:html={"{% endfor %}"} />
      </tr>
    </thead>
    <tbody>
      <Fragment set:html={"{% for row in rows %}"} />
      <tr class="transition-colors duration-300 hover:bg-secondary-100">
        <Fragment set:html={"{% for header in headers %}"} />
        <td
          class="text-sm transition duration-300 border-t border-secondary-300 h-px"
        >
          <Fragment
            set:html={'{% if header.format is defined and header.format == "number" %}'}
          />
          <div class="px-6 py-3 flex items-center">
            <input
              type="number"
              value={`{{ row[header.key] }}`}
              class="w-16 p-2 text-sm border border-secondary-300 rounded focus:border-blue-500 focus:outline-none"
            />
          </div>
          <Fragment
            set:html={"{% elif header.format is defined and header.format == 'delete_order' %}"}
          />
          <div class="px-6 py-3 flex items-center">
            <button
              type="button"
              onclick={`document.getElementById('delete-modal-{{ row[header.key] }}').showModal()`}
              class="text-red-500 hover:text-red-700 font-medium p-2 rounded hover:bg-secondary-200 transition-colors"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="32"
                height="32"
                viewBox="0 0 24 24"
                ><path
                  fill="currentColor"
                  d="M19 4h-3.5l-1-1h-5l-1 1H5v2h14M6 19a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V7H6z"
                ></path></svg
              >
            </button>
            <dialog
              id={`delete-modal-{{ row[header.key] }}`}
              class="p-0 rounded-lg shadow-xl backdrop:bg-black/50"
            >
              <div class="p-6 w-96 bg-white">
                <h3 class="text-lg font-bold text-gray-900 mb-4">
                  Delete Order?
                </h3>
                <p class="text-gray-600 mb-6">
                  Are you sure you want to delete this order? This action cannot
                  be undone.
                </p>
                <div class="flex justify-end gap-3">
                  <form method="dialog">
                    <button
                      class="px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded hover:bg-gray-200 transition-colors"
                    >
                      Cancel
                    </button>
                  </form>
                  <button
                    type="button"
                    onclick={`fetch('/orders/{{ row[header.key] }}', { method: 'DELETE' }).then(r => { if(r.ok) window.location.reload(); else alert('Error deleting order'); })`}
                    class="px-4 py-2 text-sm font-medium text-white bg-red-600 rounded hover:bg-red-700 transition-colors"
                  >
                    Delete
                  </button>
                </div>
              </div>
            </dialog>
          </div>
          <Fragment
            set:html={"{% elif header.format is defined and header.format == 'delete_user' %}"}
          />
          <div class="px-6 py-3 flex items-center">
            <button
              type="button"
              onclick={`document.getElementById('delete-user-modal-{{ row[header.key] }}').showModal()`}
              class="text-red-500 hover:text-red-700 font-medium p-2 rounded hover:bg-secondary-200 transition-colors"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="32"
                height="32"
                viewBox="0 0 24 24"
                ><path
                  fill="currentColor"
                  d="M19 4h-3.5l-1-1h-5l-1 1H5v2h14M6 19a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V7H6z"
                ></path></svg
              >
            </button>
            <dialog
              id={`delete-user-modal-{{ row[header.key] }}`}
              class="p-0 rounded-lg shadow-xl backdrop:bg-black/50"
            >
              <div class="p-6 w-96 bg-white">
                <h3 class="text-lg font-bold text-gray-900 mb-4">
                  Delete User?
                </h3>
                <p class="text-gray-600 mb-6">
                  Are you sure you want to delete this user? This action cannot
                  be undone.
                </p>
                <div class="flex justify-end gap-3">
                  <form method="dialog">
                    <button
                      class="px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded hover:bg-gray-200 transition-colors"
                    >
                      Cancel
                    </button>
                  </form>
                  <button
                    type="button"
                    onclick={`fetch('/users/{{ row[header.key] }}', { method: 'DELETE' }).then(r => { if(r.ok) window.location.reload(); else alert('Error deleting user'); })`}
                    class="px-4 py-2 text-sm font-medium text-white bg-red-600 rounded hover:bg-red-700 transition-colors"
                  >
                    Delete
                  </button>
                </div>
              </div>
            </dialog>
          </div>
          <Fragment set:html={"{% else %}"} />
          <a href={`{{ row.link }}`} class="px-6 py-3 flex items-center h-full">
            <Fragment
              set:html={'{% if header.format is defined and header.format == "image" %}'}
            />
            <Fragment set:html={"{% if row[header.key] %}"} />
            <img
              src=`{{ row[header.key] }}`
              alt="Product thumbnail"
              class="w-32 h-32 object-cover rounded"
            />
            <Fragment set:html={"{% else %}"} />
            <div
              class="w-32 h-32 bg-secondary-200 rounded flex items-center justify-center text-secondary-400 text-xs"
            >
              N/A
            </div>
            <Fragment set:html={"{% endif %}"} />
            <Fragment set:html={"{% else %}"} />
            <Fragment set:html={"{{ row[header.key] }}"} />
            <Fragment set:html={"{% endif %}"} />
          </a>
          <Fragment set:html={"{% endif %}"} />
        </td>
        <Fragment set:html={"{% endfor %}"} />
      </tr>
      <Fragment set:html={"{% endfor %}"} />
    </tbody>
  </table>
</div>
